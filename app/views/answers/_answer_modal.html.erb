<div class="modal" id="answer-modal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button id="close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <br></br>
        <%= @answer.user.name %>
      </div>

      <div class="modal-body">
        <h3>Detalhes da resposta</h3>

        <%= render partial: 'shared/answer_info', locals: { answer: @answer } %>
        <br></br>

        <table style="width: 100%">
          <tbody>
            <tr>
              <td>
                <button id="show-answer" class="btn btn-primary text-center"
                        style="display: block; width: 100%">Visualizar resposta</button>
              </td>
            </tr>
            <tr>
              <td>
                <button id="add-answer-<%= @answer.id %>-similar" class="btn btn-primary text-center"
                        style="display: block; width: 100%">Adicionar respostas semelhantes</button>
              </td>
            </tr>
          </tbody>
        </table>

        <hr></hr>

        <% unless @answer.compilation_error? %>
          <h3>Resultados dos casos de teste</h3>

          <% @answer.test_cases_results.each do |test_case_result| %>
            <%= render partial: "shared/test_case_result", locals: { test_case_result: test_case_result } %>
          <% end %>
        <% end %>

      </div>
    </div>
  </div>
</div>

<script text="text/javascript">
  function createModal(modal_name) {
    var div = $(document.createElement('div'))
    div.attr('id', modal_name + '-container');
    $('body').append(div);

    if (modal_name == "answer-content")
      $(div).html("<%= escape_javascript(render partial: 'answer_content_modal', locals: { answer: @answer }) %>");

    $('body').append(div);
  }

  $('#answer-container').on('hidden.bs.modal', function () {
    $("#<%= @node_html_id %>").attr('fill', setNodeCollor(<%= @answer.correct %>));
  });

  $('#show-answer').click(function() {
    showModal('answer-content');
  });
</script>
