$('#test-info-container').on('hidden.bs.modal', function () {
  alert("oii")
  $(this).remove();
});

$('#test-results').append('<b><a href="#" id="show-log">Ver o resultado</i></b>')

// Display each result in the screen.
<% @results.each do |result| %>
  // Div to put the result.
  var div = $(document.createElement('div'));

  <% if result[:status] == :error %>
    div.attr('class', 'alert alert-danger text-left');
    div.append("<i class='icon fa fa-close'> <%= result[:title] %></i>");
  <% else %>
    div.attr('class', 'alert alert-success text-left');
    div.append("<i class='icon fa fa-check'> <%= result[:title] %></i>");
  <% end %>

  $('#test-results').append(div)
<% end %>

// Open modal displaying the log content.
$('#show-log').click(function(event) {
  // It seems odd remove test-info-container and create it again in sequence,
  // but that is necessary because currently, bootstrap modal has an error
  // (at least in AdminLTE2): 'hidden.bs.modal' event is called only after
  // I do something in my modal (click in a button, for instance) and then
  // close it (otherwise it doesn't work). Without this event, remove and
  // create it is an option.
  $('#test-info-container').remove();
  var div = $(document.createElement('div'))
  div.attr('id', 'test-info-container');
  $('body').append(div);
  $(div).html("<%= escape_javascript(render 'test_log_modal') %>");
  $('#test-log-content').text('<%= raw j(@output) %>');
  $('#test-info-modal').modal('show');
});
